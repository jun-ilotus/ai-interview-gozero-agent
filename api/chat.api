syntax = "v1"

info (
	title:   "InterviewAPP Chat API"
	author:  "ilotus"
	version: "1.0"
)

type InterViewAPPChatReq {
	Message string `form:"message"`
	ChatId  string `form:"chatId"`
}

type ChatResponse {
	Content string `json:"content"`
	IsLast  bool   `json:"isLast"`
}

type KnowledgeUploadReq {
	Title   string `form:"title"` // 知识标题
	Content string `form:"content"` // 知识内容
}

type KnowledgeUploadResp {
	Msg    string `json:"msg"`
	Chunks int    `json:"chunks"` // 保存知识块数量
}

service chat {
	@doc "SSE流式接口"
	@handler Chat
	post /interview_app/chat/sse (InterViewAPPChatReq)

	@doc "知识库上传"
	@handler KnowledgeUpload
	post /api/ai/knowledge/upload (KnowledgeUploadReq) returns (KnowledgeUploadResp)
}

